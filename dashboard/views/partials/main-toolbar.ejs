<header class="c-purple">
    <nav class="main-toolbar">
        <ul class="menu">
            <li class="logo"><a href="/"><img src="/public/images/logo-mini.png" width="35px">VW-Bot</a></li>
            <li class="item"><a href="/guides"><i class="fa fa-book"></i>Обучение</a></li>
            <li class="item"><a href="https://discord.gg/3sR3P4E8SX" target="_blank"><svg width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M297.216 243.2c0 15.616-11.52 28.416-26.112 28.416-14.336 0-26.112-12.8-26.112-28.416s11.52-28.416 26.112-28.416c14.592 0 26.112 12.8 26.112 28.416zm-119.552-28.416c-14.592 0-26.112 12.8-26.112 28.416s11.776 28.416 26.112 28.416c14.592 0 26.112-12.8 26.112-28.416.256-15.616-11.52-28.416-26.112-28.416zM448 52.736V512c-64.494-56.994-43.868-38.128-118.784-107.776l13.568 47.36H52.48C23.552 451.584 0 428.032 0 398.848V52.736C0 23.552 23.552 0 52.48 0h343.04C424.448 0 448 23.552 448 52.736zm-72.96 242.688c0-82.432-36.864-149.248-36.864-149.248-36.864-27.648-71.936-26.88-71.936-26.88l-3.584 4.096c43.52 13.312 63.744 32.512 63.744 32.512-60.811-33.329-132.244-33.335-191.232-7.424-9.472 4.352-15.104 7.424-15.104 7.424s21.248-20.224 67.328-33.536l-2.56-3.072s-35.072-.768-71.936 26.88c0 0-36.864 66.816-36.864 149.248 0 0 21.504 37.12 78.08 38.912 0 0 9.472-11.52 17.152-21.248-32.512-9.728-44.8-30.208-44.8-30.208 3.766 2.636 9.976 6.053 10.496 6.4 43.21 24.198 104.588 32.126 159.744 8.96 8.96-3.328 18.944-8.192 29.44-15.104 0 0-12.8 20.992-46.336 30.464 7.68 9.728 16.896 20.736 16.896 20.736 56.576-1.792 78.336-38.912 78.336-38.912z"></path></svg>Сервер</a></li>
            <!-- <li><a href="/donate" id="donate"><i class="fa fa-heart"></i>Поддержите нас</a></li> -->
            <div class="spacer"></div>
            <% if(isLoggedIn) { %>
                <li class="item has-submenu"><a><img id="profile" src="https://cdn.discordapp.com/avatars/<%= userDoc.discord_id %>/<%= userDoc.avatar %>.png" width="30px"><%= userDoc.discord_tag %> <i class="fa fa-sort-down"></i></a>
                    <ul class="submenu">
                        <li class="subitem"><a href="/dashboard">Мои сервера</a></li>
                        <li class="subitem"><a id="logout" href="/logout">Выйти</a></li>
                    </ul>
                </li>
            <% } else { %>
                <li class="item"><a href="/auth"><svg width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"></path></svg>Войти</a></li>
            <% } %>
            <!-- <li class="item has-submenu"><a><i class="fa fa-language"></i><i class="fa fa-sort-down"></i></a>
                <ul class="submenu">
                    <li class="subitem"><a href="">English</a></li>
                    <li class="subitem"><a href="">Русский</a></li>
                </ul>
            </li> -->
        </ul>
    </nav>
</header>
<script>
    const navbarMenu = document.querySelector(".main-toolbar .menu");
 
    /* Activate Submenu */
    function toggleItem() {
        if (this.classList.contains("submenu-active")) {
            this.classList.remove("submenu-active");
        } else if (navbarMenu.querySelector(".submenu-active")) {
            navbarMenu.querySelector(".submenu-active").classList.remove("submenu-active");
            this.classList.add("submenu-active");
        } else {
            this.classList.add("submenu-active");
        }
    }
    
    /* Event Listeners */
    for (let item of document.querySelectorAll(".main-toolbar .item")) {
        if (item.querySelector(".submenu")) {
            item.addEventListener("click", toggleItem, false);
            item.addEventListener("keypress", toggleItem, false);
        }   
    }

    /* Close Submenu From Anywhere */
    function closeSubmenu(e) {
        let isClickInside = navbarMenu.contains(e.target);
        
        if (!isClickInside && navbarMenu.querySelector(".submenu-active")) {
            navbarMenu.querySelector(".submenu-active").classList.remove("submenu-active");
        }
    }
    
    /* Event listener */
    document.addEventListener("click", closeSubmenu, false);
</script>